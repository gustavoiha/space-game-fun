# Space Game Development Backlog

Backlog for the Wormhole Era space exploration and reconstruction game.

Each task has an ID (e.g. `M1.1`) so tools and humans can reference them unambiguously.

The backlog reflects a **multi-scene, multi-physics star system architecture**, where:
- A persistent galaxy root scene holds global data, intel, and UI.
- Each star system has its own additive scene and physics world.
- A simulation manager advances all active star system scenes in real time.
- The player has **only two spatial views**:
  - In-system ship view (3D).
  - Galaxy map view (2D).
- There is **no dedicated 2D in-system tactical map**. Remote systems are visible only via **stale manifests and intel**, not live objects.

---

## Bugs or gameplay issues

> Note: Some early bugs reference a “star system map” feature that has since been superseded by the **galaxy-only map + system manifest** design. These items are kept as historical notes; they do not reflect current planned UI.

1. Bug1 [DONE – HISTORICAL]
  - Old behaviour: When map was opened, first you saw the star system map. But as soon as you zoomed, the galaxy map appeared.
  - Fix: Map opened centered on the player’s system with a configurable initial system view radius.
  - Status under new design: the dedicated system map mode has been removed; this bug is not relevant going forward.

2. Bug2 [DONE – HISTORICAL]
  - Old behaviour: Player ship icon in the star system map did not track player ship.
  - Fix: System map used runtime system center/radius and gate transforms.
  - Status: superseded by galaxy-only map and in-system 3D view.

3. Bug3 [TODO]
  - In-system star renders as sphere with no texture or materials.
  - `UNITY_CONFIGURATION.md` file should have instructions on setting up a realistic high-quality star.
  - If textures are needed, they should be generated by AI agent.

4. Bug4 [DONE – HISTORICAL]
  - Old behaviour: Star and wormhole icons in the star system map scaled poorly.
  - Status: map representation of system-scale objects has been removed; icon scaling is now limited to galaxy map symbols.

---

## Milestone 0 – Stabilize Current Prototype (Gates, Discovery, Map)

**Goal:** Reliable travel between systems via wormholes, with correct discovery state and a working **galaxy map** that updates without reopening.

### M0 – Data & Architecture

- **M0.1 – System & Wormhole IDs [DONE]**
- **M0.2 – Discovery State [DONE]**

### M0 – Wormhole Travel & Prompts

- **M0.3 – Refactor Wormhole Jump Flow [DONE]**
- **M0.4 – Screen-Space Wormhole Prompt [DONE]**

### M0 – Map Refresh Issues

- **M0.5 – Event-Based Map Refresh [DONE]**
  - Map UI already refreshes from discovery state events; this now includes triggers when intel changes.

- **M0.6 – In-System Boundary Rework [DONE]**

---

## Milestone 0A – Basic Playability Visuals (In-System)

*(Unchanged – still about local 3D visuals so the player can navigate when present in a system.)*

- **M0A.1 – Space Background (static starfield) [DONE]**
- **M0A.2 – Primary Star Visual [DONE]**
- **M0A.3 – Black Hole / Gate Anchor Visual [TODO]**
- **M0A.4 – Planet/Body Placeholders [TODO]**
- **M0A.5 – Ambient Lighting & Exposure Baseline [TODO]**
- **M0A.6 – Navigation Readability Touches [TODO]**

---

## Milestone 0B – Multi-Scene Star System Architecture

*(Unchanged in spirit – still the backbone for separate system scenes and physics.)*

- **M0B.1 – Persistent Galaxy Root Scene [DONE]**
- **M0B.2 – Star System Scene Template [TODO]**
- **M0B.3 – Per-System Physics Worlds [DONE]**
- **M0B.4 – GalaxySimulationManager Implementation [TODO]**
- **M0B.5 – Ship Transfer Between Scenes [TODO]**
- **M0B.6 – AI Ships in Multiple Systems [TODO]**

---

## Milestone 1 – Galaxy Generation & Topology

*(As before – topology is independent of UI changes.)*

- **M1.1 – Distance-Based Placement [DONE]**
- **M1.2 – Connection Distribution [DONE]**
- **M1.5 – Solar System Wormhole Cap [DONE]**
- **M1.3 – Edge Placement Fallback [DONE]**
- **M1.4 – Map Extents Output [DONE]**

---

## Milestone 2 – Galaxy Map UX (2D Network, Intel-Aware)

**Goal:** A 2D galaxy map that visualizes the Wormhole Era network, supports zoom/pan, and reflects the player’s current position, discoveries, and **intel status** per system. There is no 2D in-system tactical map.

### M2 – Rendering & Navigation

- **M2.1 – Coordinate Normalization [DONE]**
- **M2.2 – Pannable / Zoomable Map [DONE]**
- **M2.3 – Draw Systems & Wormhole Lines [DONE]**
- **M2.4 – Zoom Pivot on Mouse [DONE]**

- **M2.5 – System Focus Instead of System Map [UPDATED / TODO]**
  - Replace the concept of a “star system map” with:
    - A simple way to **focus the galaxy map** on the current system (e.g. hotkey or button).
    - Visual emphasis on the current system node (pulse, halo, etc.).
  - Ensure that opening the map always:
    - Recenters on the current system.
    - Uses a default zoom level that shows the player’s local neighbourhood, not the entire galaxy.

### M2 – Interaction

- **M2.6 – System Selection [DONE]**
  - Clicking a system node selects it and opens an info panel; under the new design this panel will show intel/manifests rather than a local top-down layout.

- **M2.7 – Wormhole Selection [UPDATED / TODO]**
  - Enable selecting wormhole edges in the galaxy map to:
    - Show adjacency info (connected systems, last-visited times).
    - Preview the **risk level** (based on intel, known pirate activity, etc.) instead of any real-time traffic.

- **M2.8 – Jump / Navigation from Map [UPDATED / TODO]**
  - From the current system, allow selecting an **adjacent** system and issuing a “set course” command.
  - Implementation detail:
    - This does not teleport the player; it:
      - Marks the destination in UI.
      - Optionally places a nav marker pointing the player toward the appropriate gate in the current system.
    - Actual traversal still occurs physically in 3D via `ShipWormholeNavigator`.

- **M2.9 – System Mouse Hovering [UPDATED / TODO]**
  - Hovering over a system shows a tooltip summarising:
    - Discovery status.
    - Last intel update time and reliability.
    - Key alerts (e.g. “freighter missing”, “high piracy”).

- **M2.10 – Galaxy Map State Container [TODO]**
  - Keep as originally planned: separate data (`GalaxyState`) feeding read-only map UI.

- **M2.11 – Galaxy Map Intel Overlay & Manifest Integration [REPLACEMENT / TODO]**
  - Replace the old “Star System Map Render Overhaul” task with:
    - A visual **intel overlay**:
      - Color, saturation, or iconography to show intel reliability.
      - Highlight systems with critical alerts.
    - Integration with `SystemManifestPanel`:
      - Clicking a system opens a manifest panel showing last-known stations, fleets, and alerts.
      - For undiscovered systems, panel shows “Unknown – no contact yet.”
    - Ensure all representation of remote systems uses **last-known data only**, never live object positions.

---

## Milestone 2A – System Intel, Manifests, and Missing Transports

**Goal:** Implement the intel model where the player cannot see real-time information from other systems. Instead they see **stale manifests** that update only when a ship physically carries data, with the possibility of **missing transports**.

- **M2A.1 – SystemManifest Data Model [TODO]**
  - Implement `SystemManifest` (stations, fleets, alerts, population, summary resources).
  - Implement serialisable data for:
    - `lastUpdatedGameTime`
    - `reliability` (0–1)
    - `List<SystemAlert>`

- **M2A.2 – SystemIntelState Runtime Store [TODO]**
  - Implement `SystemIntelState` (as in architecture).
  - Provide:
    - APIs to get/update manifests.
    - Intel decay per in-game day.
    - Events for “manifest changed” and “intel reliability changed”.

- **M2A.3 – Manifest Snapshot from StarSystemRuntime [TODO]**
  - Add APIs on `StarSystemRuntime` to build a snapshot from:
    - Known stations/colonies.
    - Present AI fleets.
    - Local alerts (unrest, low supplies, high pirate activity).
  - Hook this into:
    - Player arrival in a system (always refresh).
    - Explicit courier arrival (when logistics is implemented).

- **M2A.4 – Missing Transport Detection [TODO]**
  - Define a `TransportOrder` model (origin system, destination system, expected arrival time, ship(s) involved).
  - Integrate with `SystemIntelState` to:
    - Register planned transports.
    - Mark them arrived when they reach destination.
    - Flag them as **missing** when overdue beyond a configurable grace period, emitting a `SystemAlert` and a high-level log entry:  
      e.g. “Transport ship from System A to System B is missing.”

- **M2A.5 – Galaxy Map / UI Hooks for Intel [TODO]**
  - Wire `SystemIntelState` into:
    - `GalaxyMapUIManager` (color/overlay changes).
    - `SystemManifestPanel` (details).
    - A simple notifications widget that surfaces important intel changes (e.g. “New intel from System X”, “Ship missing on route Y→Z”).

---

## Milestone 3 – Local Control and System Scene Layout

**Goal:** From the galaxy map, the player can focus on the current system, return to the in-system ship view, and control ships **only where they physically are**. There is no remote top-down tactical system map.

### M3 – System Scene Layout

- **M3.1 – System View Scene/Layout [UPDATED / TODO]**
  - Finalise the layout for a single star system **scene** viewed from the player camera:
    - Readable star, background, and major points of interest.
    - Wormhole gates clearly placed and discoverable.
    - Stations/colonies (when present) with obvious docking approach.
  - Ensure `StarSystemRuntime` exposes references to key anchors (e.g. system center, gates) for:
    - HUD markers.
    - Nav/approach prompts.

### M3 – Transition: Galaxy Map ↔ In-System Ship View

- **M3.2 – Transition Map ↔ In-System View [UPDATED / TODO]**
  - From the in-system view:
    - Allow opening the **galaxy map + manifest UI** via a hotkey.
  - From the galaxy map:
    - Allow closing the map and returning directly to the **player ship camera** in the current system.
